{% extends 'core/base.html' %}

{% block body %}

<h3>Müşteri Temsilcisi İşlem Paneli</h3>
<p>Hoşgeldiniz {{ request.user.get_short_name }}</p>

<button id="btn_cd" class="btn btn-sm btn-primary" style="margin-bottom:20px;">Arıza Kaydı Aç</button>

<table class="table">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Müşteri</th>
            <th scope="col">Cihaz</th>
            <th scope="col">Kayıt Tarihi</th>
            <th scope="col">Tamir Durumu</th>
        </tr>
    </thead>
    <tbody>
        {% for ndx, device in devices %}
        <tr>
            <th scope="row">{{ ndx|add:"1" }}</th>
            <td>{{ device.customer.fullname }}</td>
            <td>{{ device.name }}</td>
            <td>{{ device.recieved_at }}</td>
            <td>{{ device.repair_status }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    document.getElementById("btn_cd").onclick = () => {
        let deviceUrl = "{% url 'repr:device_create' %}";
        window.location.replace(deviceUrl);
    };
</script>

{% endblock %}